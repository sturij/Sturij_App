<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Availability Management - Sturij Booking System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .sidebar-item.active {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
        }
        .sidebar-item:hover:not(.active) {
            background-color: rgba(59, 130, 246, 0.05);
        }
        .time-slot {
            transition: all 0.2s ease;
        }
        .time-slot:hover {
            background-color: rgba(59, 130, 246, 0.1);
        }
        .time-slot.selected {
            background-color: rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
        }
        .time-slot.available {
            background-color: rgba(16, 185, 129, 0.1);
            border-color: #10b981;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div class="hidden md:flex md:flex-shrink-0">
            <div class="flex flex-col w-64 bg-white border-r">
                <div class="flex items-center justify-center h-16 px-4 border-b bg-blue-600">
                    <h1 class="text-xl font-semibold text-white">Sturij Admin</h1>
                </div>
                <div class="flex flex-col flex-grow overflow-y-auto">
                    <nav class="flex-1 px-2 py-4 space-y-1">
                        <a href="index.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-tachometer-alt mr-3"></i>
                            Dashboard
                        </a>
                        <a href="availability.html" class="flex items-center px-4 py-3 text-sm font-medium text-blue-600 rounded-md sidebar-item active">
                            <i class="far fa-calendar-alt mr-3"></i>
                            Availability
                        </a>
                        <a href="bookings.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-calendar-check mr-3"></i>
                            Bookings
                        </a>
                        <a href="email-templates.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-envelope mr-3"></i>
                            Email Templates
                        </a>
                        <a href="ai-assistant.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-robot mr-3"></i>
                            AI Assistant
                        </a>
                        <a href="users.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-users mr-3"></i>
                            Users
                        </a>
                        <a href="settings.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-cog mr-3"></i>
                            Settings
                        </a>
                    </nav>
                    <div class="p-4 border-t">
                        <div class="flex items-center">
                            <img id="admin-avatar" class="w-8 h-8 rounded-full mr-3" src="https://ui-avatars.com/api/?name=Admin&background=3b82f6&color=fff" alt="Admin">
                            <div>
                                <p id="admin-name" class="text-sm font-medium text-gray-700">Admin User</p>
                                <p id="admin-email" class="text-xs text-gray-500">admin@example.com</p>
                            </div>
                        </div>
                        <button id="sign-out-button" class="mt-3 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            Sign Out
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile sidebar -->
        <div class="md:hidden fixed inset-0 z-40 flex" id="mobile-sidebar" style="display: none;">
            <div class="fixed inset-0 bg-gray-600 bg-opacity-75" id="sidebar-backdrop"></div>
            <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white">
                <div class="absolute top-0 right-0 -mr-12 pt-2">
                    <button id="close-sidebar" class="ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
                        <span class="sr-only">Close sidebar</span>
                        <i class="fas fa-times text-white"></i>
                    </button>
                </div>
                <div class="flex items-center justify-center h-16 px-4 border-b bg-blue-600">
                    <h1 class="text-xl font-semibold text-white">Sturij Admin</h1>
                </div>
                <div class="flex-1 h-0 overflow-y-auto">
                    <nav class="px-2 py-4 space-y-1">
                        <a href="index.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-tachometer-alt mr-3"></i>
                            Dashboard
                        </a>
                        <a href="availability.html" class="flex items-center px-4 py-3 text-sm font-medium text-blue-600 rounded-md sidebar-item active">
                            <i class="far fa-calendar-alt mr-3"></i>
                            Availability
                        </a>
                        <a href="bookings.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-calendar-check mr-3"></i>
                            Bookings
                        </a>
                        <a href="email-templates.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-envelope mr-3"></i>
                            Email Templates
                        </a>
                        <a href="ai-assistant.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-robot mr-3"></i>
                            AI Assistant
                        </a>
                        <a href="users.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-users mr-3"></i>
                            Users
                        </a>
                        <a href="settings.html" class="flex items-center px-4 py-3 text-sm font-medium text-gray-600 rounded-md sidebar-item">
                            <i class="fas fa-cog mr-3"></i>
                            Settings
                        </a>
                    </nav>
                </div>
                <div class="p-4 border-t">
                    <div class="flex items-center">
                        <img class="w-8 h-8 rounded-full mr-3" src="https://ui-avatars.com/api/?name=Admin&background=3b82f6&color=fff" alt="Admin">
                        <div>
                            <p class="text-sm font-medium text-gray-700">Admin User</p>
                            <p class="text-xs text-gray-500">admin@example.com</p>
                        </div>
                    </div>
                    <button id="mobile-sign-out-button" class="mt-3 w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        Sign Out
                    </button>
                </div>
            </div>
            <div class="flex-shrink-0 w-14"></div>
        </div>

        <!-- Main content -->
        <div class="flex flex-col flex-1 w-0 overflow-hidden">
            <!-- Top navbar -->
            <div class="relative z-10 flex-shrink-0 flex h-16 bg-white shadow">
                <button id="open-sidebar" class="md:hidden px-4 text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
                    <span class="sr-only">Open sidebar</span>
                    <i class="fas fa-bars"></i>
                </button>
                <div class="flex-1 px-4 flex justify-between">
                    <div class="flex-1 flex items-center">
                        <h1 class="text-xl font-semibold text-gray-800">Availability Management</h1>
                    </div>
                    <div class="ml-4 flex items-center md:ml-6">
                        <button class="p-1 rounded-full text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <span class="sr-only">View notifications</span>
                            <i class="fas fa-bell"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main content area -->
            <main class="flex-1 relative overflow-y-auto focus:outline-none">
                <div class="py-6">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8">
                        <!-- Tabs -->
                        <div class="border-b border-gray-200">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <button id="tab-weekly" class="border-blue-500 text-blue-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    Weekly Schedule
                                </button>
                                <button id="tab-exceptions" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    Date Exceptions
                                </button>
                            </nav>
                        </div>

                        <!-- Weekly Schedule Tab Content -->
                        <div id="weekly-schedule-content" class="mt-6">
                            <div class="bg-white shadow overflow-hidden sm:rounded-md">
                                <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">
                                        Weekly Availability Schedule
                                    </h3>
                                    <button id="save-weekly-schedule" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Save Changes
                                    </button>
                                </div>
                                <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
                                    <p class="text-sm text-gray-500 mb-4">
                                        Set your regular weekly availability. This schedule will apply to all weeks unless overridden by date exceptions.
                                    </p>
                                    
                                    <!-- Days of week -->
                                    <div class="space-y-6">
                                        <!-- Monday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="monday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                                    <label for="monday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Monday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="monday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="monday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <div class="time-slot flex items-center p-3 border rounded-md available">
                                                    <div class="flex-grow">
                                                        <div class="flex space-x-2">
                                                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:00">9:00 AM</option>
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                            </select>
                                                            <span class="flex items-center">to</span>
                                                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                                <option value="17:30" selected>5:30 PM</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tuesday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="tuesday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                                    <label for="tuesday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Tuesday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="tuesday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="tuesday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <div class="time-slot flex items-center p-3 border rounded-md available">
                                                    <div class="flex-grow">
                                                        <div class="flex space-x-2">
                                                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:00">9:00 AM</option>
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                            </select>
                                                            <span class="flex items-center">to</span>
                                                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                                <option value="17:30" selected>5:30 PM</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Wednesday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="wednesday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                                    <label for="wednesday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Wednesday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="wednesday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="wednesday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <div class="time-slot flex items-center p-3 border rounded-md available">
                                                    <div class="flex-grow">
                                                        <div class="flex space-x-2">
                                                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:00">9:00 AM</option>
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                            </select>
                                                            <span class="flex items-center">to</span>
                                                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                                <option value="17:30" selected>5:30 PM</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Thursday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="thursday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                                    <label for="thursday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Thursday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="thursday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="thursday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <div class="time-slot flex items-center p-3 border rounded-md available">
                                                    <div class="flex-grow">
                                                        <div class="flex space-x-2">
                                                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:00">9:00 AM</option>
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                            </select>
                                                            <span class="flex items-center">to</span>
                                                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                                <option value="17:30" selected>5:30 PM</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Friday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="friday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                                    <label for="friday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Friday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="friday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="friday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <div class="time-slot flex items-center p-3 border rounded-md available">
                                                    <div class="flex-grow">
                                                        <div class="flex space-x-2">
                                                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:00">9:00 AM</option>
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                            </select>
                                                            <span class="flex items-center">to</span>
                                                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                                <option value="09:30">9:30 AM</option>
                                                                <option value="10:00">10:00 AM</option>
                                                                <option value="10:30">10:30 AM</option>
                                                                <option value="11:00">11:00 AM</option>
                                                                <option value="11:30">11:30 AM</option>
                                                                <option value="12:00">12:00 PM</option>
                                                                <option value="12:30">12:30 PM</option>
                                                                <option value="13:00">1:00 PM</option>
                                                                <option value="13:30">1:30 PM</option>
                                                                <option value="14:00">2:00 PM</option>
                                                                <option value="14:30">2:30 PM</option>
                                                                <option value="15:00">3:00 PM</option>
                                                                <option value="15:30">3:30 PM</option>
                                                                <option value="16:00">4:00 PM</option>
                                                                <option value="16:30">4:30 PM</option>
                                                                <option value="17:00">5:00 PM</option>
                                                                <option value="17:30" selected>5:30 PM</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Saturday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="saturday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="saturday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Saturday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="saturday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="saturday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <!-- Time slots will be added here -->
                                            </div>
                                        </div>

                                        <!-- Sunday -->
                                        <div class="bg-gray-50 p-4 rounded-lg">
                                            <div class="flex items-center justify-between mb-4">
                                                <div class="flex items-center">
                                                    <input id="sunday-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                                    <label for="sunday-enabled" class="ml-2 block text-sm font-medium text-gray-700">
                                                        Sunday
                                                    </label>
                                                </div>
                                                <div class="flex space-x-2">
                                                    <button class="add-time-slot inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" data-day="sunday">
                                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="sunday-slots" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                                <!-- Time slots will be added here -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Date Exceptions Tab Content -->
                        <div id="date-exceptions-content" class="mt-6" style="display: none;">
                            <div class="bg-white shadow overflow-hidden sm:rounded-md">
                                <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                                    <h3 class="text-lg leading-6 font-medium text-gray-900">
                                        Date Exceptions
                                    </h3>
                                    <button id="add-exception" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        <i class="fas fa-plus mr-1"></i> Add Exception
                                    </button>
                                </div>
                                <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
                                    <p class="text-sm text-gray-500 mb-4">
                                        Set exceptions for specific dates that override your regular weekly schedule. Use this for holidays, special events, or other one-time changes.
                                    </p>
                                    
                                    <!-- Exception list -->
                                    <div class="space-y-4" id="exception-list">
                                        <!-- No exceptions message -->
                                        <div id="no-exceptions-message" class="text-center py-8 text-gray-500">
                                            <i class="far fa-calendar-times text-4xl mb-2"></i>
                                            <p>No date exceptions have been added yet.</p>
                                        </div>
                                        
                                        <!-- Exception items will be added here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Exception Modal -->
    <div id="exception-modal" class="fixed inset-0 z-50 overflow-y-auto" style="display: none;">
        <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                                Add Date Exception
                            </h3>
                            <div class="mt-4">
                                <div class="mb-4">
                                    <label for="exception-date" class="block text-sm font-medium text-gray-700">Date</label>
                                    <input type="date" id="exception-date" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                </div>
                                <div class="mb-4">
                                    <label for="exception-type" class="block text-sm font-medium text-gray-700">Exception Type</label>
                                    <select id="exception-type" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                        <option value="unavailable">Unavailable (Closed)</option>
                                        <option value="custom">Custom Hours</option>
                                    </select>
                                </div>
                                <div id="custom-hours-container" class="mb-4" style="display: none;">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Custom Hours</label>
                                    <div id="exception-slots" class="space-y-3">
                                        <div class="time-slot flex items-center p-3 border rounded-md">
                                            <div class="flex-grow">
                                                <div class="flex space-x-2">
                                                    <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                        <option value="09:00">9:00 AM</option>
                                                        <option value="09:30">9:30 AM</option>
                                                        <option value="10:00">10:00 AM</option>
                                                        <option value="10:30">10:30 AM</option>
                                                        <option value="11:00">11:00 AM</option>
                                                        <option value="11:30">11:30 AM</option>
                                                        <option value="12:00">12:00 PM</option>
                                                        <option value="12:30">12:30 PM</option>
                                                        <option value="13:00">1:00 PM</option>
                                                        <option value="13:30">1:30 PM</option>
                                                        <option value="14:00">2:00 PM</option>
                                                        <option value="14:30">2:30 PM</option>
                                                        <option value="15:00">3:00 PM</option>
                                                        <option value="15:30">3:30 PM</option>
                                                        <option value="16:00">4:00 PM</option>
                                                        <option value="16:30">4:30 PM</option>
                                                        <option value="17:00">5:00 PM</option>
                                                    </select>
                                                    <span class="flex items-center">to</span>
                                                    <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                                        <option value="09:30">9:30 AM</option>
                                                        <option value="10:00">10:00 AM</option>
                                                        <option value="10:30">10:30 AM</option>
                                                        <option value="11:00">11:00 AM</option>
                                                        <option value="11:30">11:30 AM</option>
                                                        <option value="12:00">12:00 PM</option>
                                                        <option value="12:30">12:30 PM</option>
                                                        <option value="13:00">1:00 PM</option>
                                                        <option value="13:30">1:30 PM</option>
                                                        <option value="14:00">2:00 PM</option>
                                                        <option value="14:30">2:30 PM</option>
                                                        <option value="15:00">3:00 PM</option>
                                                        <option value="15:30">3:30 PM</option>
                                                        <option value="16:00">4:00 PM</option>
                                                        <option value="16:30">4:30 PM</option>
                                                        <option value="17:00">5:00 PM</option>
                                                        <option value="17:30" selected>5:30 PM</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <button class="remove-exception-slot ml-2 text-red-500 hover:text-red-700">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <button id="add-exception-slot" class="mt-2 inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        <i class="fas fa-plus mr-1"></i> Add Time Slot
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button id="save-exception" type="button" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Save Exception
                    </button>
                    <button id="cancel-exception" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../google-auth-integration.js"></script>
    <script>
        // Mobile sidebar toggle
        document.getElementById('open-sidebar').addEventListener('click', function() {
            document.getElementById('mobile-sidebar').style.display = 'flex';
        });

        document.getElementById('close-sidebar').addEventListener('click', function() {
            document.getElementById('mobile-sidebar').style.display = 'none';
        });

        document.getElementById('sidebar-backdrop').addEventListener('click', function() {
            document.getElementById('mobile-sidebar').style.display = 'none';
        });

        // Sign out functionality
        document.getElementById('sign-out-button').addEventListener('click', function() {
            if (window.googleAuthManager) {
                window.googleAuthManager.signOut();
            } else {
                // Fallback if Google Auth Manager is not available
                localStorage.removeItem('sturijUserInfo');
                window.location.href = '../auth.html';
            }
        });

        document.getElementById('mobile-sign-out-button').addEventListener('click', function() {
            if (window.googleAuthManager) {
                window.googleAuthManager.signOut();
            } else {
                // Fallback if Google Auth Manager is not available
                localStorage.removeItem('sturijUserInfo');
                window.location.href = '../auth.html';
            }
        });

        // Tab switching
        document.getElementById('tab-weekly').addEventListener('click', function() {
            document.getElementById('tab-weekly').classList.add('border-blue-500', 'text-blue-600');
            document.getElementById('tab-weekly').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('tab-exceptions').classList.remove('border-blue-500', 'text-blue-600');
            document.getElementById('tab-exceptions').classList.add('border-transparent', 'text-gray-500');
            
            document.getElementById('weekly-schedule-content').style.display = 'block';
            document.getElementById('date-exceptions-content').style.display = 'none';
        });

        document.getElementById('tab-exceptions').addEventListener('click', function() {
            document.getElementById('tab-exceptions').classList.add('border-blue-500', 'text-blue-600');
            document.getElementById('tab-exceptions').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('tab-weekly').classList.remove('border-blue-500', 'text-blue-600');
            document.getElementById('tab-weekly').classList.add('border-transparent', 'text-gray-500');
            
            document.getElementById('weekly-schedule-content').style.display = 'none';
            document.getElementById('date-exceptions-content').style.display = 'block';
        });

        // Add time slot functionality
        document.querySelectorAll('.add-time-slot').forEach(button => {
            button.addEventListener('click', function() {
                const day = this.getAttribute('data-day');
                const slotsContainer = document.getElementById(`${day}-slots`);
                
                const newSlot = document.createElement('div');
                newSlot.className = 'time-slot flex items-center p-3 border rounded-md available';
                newSlot.innerHTML = `
                    <div class="flex-grow">
                        <div class="flex space-x-2">
                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="09:00">9:00 AM</option>
                                <option value="09:30">9:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="13:30">1:30 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="14:30">2:30 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="15:30">3:30 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="16:30">4:30 PM</option>
                                <option value="17:00">5:00 PM</option>
                            </select>
                            <span class="flex items-center">to</span>
                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="09:30">9:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="13:30">1:30 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="14:30">2:30 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="15:30">3:30 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="16:30">4:30 PM</option>
                                <option value="17:00">5:00 PM</option>
                                <option value="17:30" selected>5:30 PM</option>
                            </select>
                        </div>
                    </div>
                    <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                
                slotsContainer.appendChild(newSlot);
                
                // Add event listener to the new remove button
                newSlot.querySelector('.remove-time-slot').addEventListener('click', function() {
                    newSlot.remove();
                });
            });
        });

        // Remove time slot functionality
        document.addEventListener('click', function(event) {
            if (event.target.closest('.remove-time-slot')) {
                event.target.closest('.time-slot').remove();
            }
        });

        // Day enabled/disabled toggle
        document.querySelectorAll('input[type="checkbox"][id$="-enabled"]').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const day = this.id.replace('-enabled', '');
                const slotsContainer = document.getElementById(`${day}-slots`);
                
                if (this.checked) {
                    slotsContainer.style.opacity = '1';
                    slotsContainer.style.pointerEvents = 'auto';
                } else {
                    slotsContainer.style.opacity = '0.5';
                    slotsContainer.style.pointerEvents = 'none';
                }
            });
            
            // Initialize state
            const day = checkbox.id.replace('-enabled', '');
            const slotsContainer = document.getElementById(`${day}-slots`);
            
            if (checkbox.checked) {
                slotsContainer.style.opacity = '1';
                slotsContainer.style.pointerEvents = 'auto';
            } else {
                slotsContainer.style.opacity = '0.5';
                slotsContainer.style.pointerEvents = 'none';
            }
        });

        // Save weekly schedule
        document.getElementById('save-weekly-schedule').addEventListener('click', function() {
            const weeklySchedule = {};
            
            // For each day of the week
            ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'].forEach(day => {
                const dayEnabled = document.getElementById(`${day}-enabled`).checked;
                const slots = [];
                
                if (dayEnabled) {
                    // Get all time slots for this day
                    document.querySelectorAll(`#${day}-slots .time-slot`).forEach(slotElement => {
                        const startTime = slotElement.querySelector('.start-time').value;
                        const endTime = slotElement.querySelector('.end-time').value;
                        
                        slots.push({
                            start_time: startTime,
                            end_time: endTime
                        });
                    });
                }
                
                weeklySchedule[day] = {
                    enabled: dayEnabled,
                    slots: slots
                };
            });
            
            console.log('Weekly schedule to save:', weeklySchedule);
            
            // In a real implementation, this would send the data to your API
            // For now, we'll just show a success message
            alert('Weekly schedule saved successfully!');
            
            // Store in localStorage for demo purposes
            localStorage.setItem('weeklySchedule', JSON.stringify(weeklySchedule));
        });

        // Exception modal functionality
        document.getElementById('add-exception').addEventListener('click', function() {
            document.getElementById('exception-modal').style.display = 'block';
        });

        document.getElementById('cancel-exception').addEventListener('click', function() {
            document.getElementById('exception-modal').style.display = 'none';
        });

        document.getElementById('exception-type').addEventListener('change', function() {
            if (this.value === 'custom') {
                document.getElementById('custom-hours-container').style.display = 'block';
            } else {
                document.getElementById('custom-hours-container').style.display = 'none';
            }
        });

        document.getElementById('add-exception-slot').addEventListener('click', function() {
            const slotsContainer = document.getElementById('exception-slots');
            
            const newSlot = document.createElement('div');
            newSlot.className = 'time-slot flex items-center p-3 border rounded-md';
            newSlot.innerHTML = `
                <div class="flex-grow">
                    <div class="flex space-x-2">
                        <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="09:00">9:00 AM</option>
                            <option value="09:30">9:30 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="10:30">10:30 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="11:30">11:30 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="12:30">12:30 PM</option>
                            <option value="13:00">1:00 PM</option>
                            <option value="13:30">1:30 PM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="14:30">2:30 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="15:30">3:30 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="16:30">4:30 PM</option>
                            <option value="17:00">5:00 PM</option>
                        </select>
                        <span class="flex items-center">to</span>
                        <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="09:30">9:30 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="10:30">10:30 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="11:30">11:30 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="12:30">12:30 PM</option>
                            <option value="13:00">1:00 PM</option>
                            <option value="13:30">1:30 PM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="14:30">2:30 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="15:30">3:30 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="16:30">4:30 PM</option>
                            <option value="17:00">5:00 PM</option>
                            <option value="17:30" selected>5:30 PM</option>
                        </select>
                    </div>
                </div>
                <button class="remove-exception-slot ml-2 text-red-500 hover:text-red-700">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            
            slotsContainer.appendChild(newSlot);
            
            // Add event listener to the new remove button
            newSlot.querySelector('.remove-exception-slot').addEventListener('click', function() {
                newSlot.remove();
            });
        });

        // Remove exception slot functionality
        document.addEventListener('click', function(event) {
            if (event.target.closest('.remove-exception-slot')) {
                event.target.closest('.time-slot').remove();
            }
        });

        // Save exception
        document.getElementById('save-exception').addEventListener('click', function() {
            const date = document.getElementById('exception-date').value;
            const type = document.getElementById('exception-type').value;
            
            if (!date) {
                alert('Please select a date for the exception.');
                return;
            }
            
            const exceptionData = {
                date: date,
                type: type,
                slots: []
            };
            
            if (type === 'custom') {
                // Get all time slots for this exception
                document.querySelectorAll('#exception-slots .time-slot').forEach(slotElement => {
                    const startTime = slotElement.querySelector('.start-time').value;
                    const endTime = slotElement.querySelector('.end-time').value;
                    
                    exceptionData.slots.push({
                        start_time: startTime,
                        end_time: endTime
                    });
                });
            }
            
            console.log('Exception to save:', exceptionData);
            
            // In a real implementation, this would send the data to your API
            // For now, we'll add it to the UI and store in localStorage
            
            // Get existing exceptions
            let exceptions = [];
            try {
                const storedExceptions = localStorage.getItem('dateExceptions');
                if (storedExceptions) {
                    exceptions = JSON.parse(storedExceptions);
                }
            } catch (error) {
                console.error('Error parsing stored exceptions:', error);
            }
            
            // Add new exception
            exceptions.push(exceptionData);
            
            // Store updated exceptions
            localStorage.setItem('dateExceptions', JSON.stringify(exceptions));
            
            // Update UI
            updateExceptionsList(exceptions);
            
            // Hide modal
            document.getElementById('exception-modal').style.display = 'none';
            
            // Reset form
            document.getElementById('exception-date').value = '';
            document.getElementById('exception-type').value = 'unavailable';
            document.getElementById('custom-hours-container').style.display = 'none';
            document.getElementById('exception-slots').innerHTML = `
                <div class="time-slot flex items-center p-3 border rounded-md">
                    <div class="flex-grow">
                        <div class="flex space-x-2">
                            <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="09:00">9:00 AM</option>
                                <option value="09:30">9:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="13:30">1:30 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="14:30">2:30 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="15:30">3:30 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="16:30">4:30 PM</option>
                                <option value="17:00">5:00 PM</option>
                            </select>
                            <span class="flex items-center">to</span>
                            <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                <option value="09:30">9:30 AM</option>
                                <option value="10:00">10:00 AM</option>
                                <option value="10:30">10:30 AM</option>
                                <option value="11:00">11:00 AM</option>
                                <option value="11:30">11:30 AM</option>
                                <option value="12:00">12:00 PM</option>
                                <option value="12:30">12:30 PM</option>
                                <option value="13:00">1:00 PM</option>
                                <option value="13:30">1:30 PM</option>
                                <option value="14:00">2:00 PM</option>
                                <option value="14:30">2:30 PM</option>
                                <option value="15:00">3:00 PM</option>
                                <option value="15:30">3:30 PM</option>
                                <option value="16:00">4:00 PM</option>
                                <option value="16:30">4:30 PM</option>
                                <option value="17:00">5:00 PM</option>
                                <option value="17:30" selected>5:30 PM</option>
                            </select>
                        </div>
                    </div>
                    <button class="remove-exception-slot ml-2 text-red-500 hover:text-red-700">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
        });

        // Update exceptions list in UI
        function updateExceptionsList(exceptions) {
            const exceptionList = document.getElementById('exception-list');
            const noExceptionsMessage = document.getElementById('no-exceptions-message');
            
            // Clear existing exceptions
            exceptionList.innerHTML = '';
            
            if (exceptions.length === 0) {
                // Show no exceptions message
                exceptionList.appendChild(noExceptionsMessage);
                return;
            }
            
            // Hide no exceptions message
            noExceptionsMessage.style.display = 'none';
            
            // Add each exception to the list
            exceptions.forEach((exception, index) => {
                const exceptionItem = document.createElement('div');
                exceptionItem.className = 'bg-white shadow overflow-hidden sm:rounded-lg';
                
                const formattedDate = new Date(exception.date).toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                let statusBadge = '';
                if (exception.type === 'unavailable') {
                    statusBadge = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">Unavailable</span>';
                } else {
                    statusBadge = '<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Custom Hours</span>';
                }
                
                let slotsHtml = '';
                if (exception.type === 'custom' && exception.slots.length > 0) {
                    slotsHtml = '<div class="mt-2"><h4 class="text-sm font-medium text-gray-500">Available Hours:</h4><ul class="mt-1 space-y-1">';
                    
                    exception.slots.forEach(slot => {
                        // Format times for display
                        const startTime = formatTime(slot.start_time);
                        const endTime = formatTime(slot.end_time);
                        
                        slotsHtml += `<li class="text-sm text-gray-700">${startTime} - ${endTime}</li>`;
                    });
                    
                    slotsHtml += '</ul></div>';
                }
                
                exceptionItem.innerHTML = `
                    <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                        <div>
                            <h3 class="text-lg leading-6 font-medium text-gray-900">
                                ${formattedDate}
                            </h3>
                            <p class="mt-1 max-w-2xl text-sm text-gray-500 flex items-center">
                                ${statusBadge}
                            </p>
                            ${slotsHtml}
                        </div>
                        <div>
                            <button class="remove-exception text-red-500 hover:text-red-700" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                exceptionList.appendChild(exceptionItem);
                
                // Add event listener to remove button
                exceptionItem.querySelector('.remove-exception').addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    removeException(index);
                });
            });
        }

        // Format time for display
        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const hour12 = hour % 12 || 12;
            return `${hour12}:${minutes} ${ampm}`;
        }

        // Remove exception
        function removeException(index) {
            // Get existing exceptions
            let exceptions = [];
            try {
                const storedExceptions = localStorage.getItem('dateExceptions');
                if (storedExceptions) {
                    exceptions = JSON.parse(storedExceptions);
                }
            } catch (error) {
                console.error('Error parsing stored exceptions:', error);
                return;
            }
            
            // Remove exception at index
            exceptions.splice(index, 1);
            
            // Store updated exceptions
            localStorage.setItem('dateExceptions', JSON.stringify(exceptions));
            
            // Update UI
            updateExceptionsList(exceptions);
        }

        // Load saved data on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Load weekly schedule
            try {
                const storedSchedule = localStorage.getItem('weeklySchedule');
                if (storedSchedule) {
                    const weeklySchedule = JSON.parse(storedSchedule);
                    
                    // Apply saved schedule to UI
                    Object.keys(weeklySchedule).forEach(day => {
                        const dayData = weeklySchedule[day];
                        
                        // Set day enabled/disabled
                        document.getElementById(`${day}-enabled`).checked = dayData.enabled;
                        
                        // Set day slots opacity based on enabled state
                        const slotsContainer = document.getElementById(`${day}-slots`);
                        if (dayData.enabled) {
                            slotsContainer.style.opacity = '1';
                            slotsContainer.style.pointerEvents = 'auto';
                        } else {
                            slotsContainer.style.opacity = '0.5';
                            slotsContainer.style.pointerEvents = 'none';
                        }
                        
                        // Clear existing slots
                        slotsContainer.innerHTML = '';
                        
                        // Add saved slots
                        dayData.slots.forEach(slot => {
                            const newSlot = document.createElement('div');
                            newSlot.className = 'time-slot flex items-center p-3 border rounded-md available';
                            newSlot.innerHTML = `
                                <div class="flex-grow">
                                    <div class="flex space-x-2">
                                        <select class="start-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                            ${generateTimeOptions(slot.start_time, '09:00', '17:00', 30)}
                                        </select>
                                        <span class="flex items-center">to</span>
                                        <select class="end-time block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                            ${generateTimeOptions(slot.end_time, '09:30', '17:30', 30)}
                                        </select>
                                    </div>
                                </div>
                                <button class="remove-time-slot ml-2 text-red-500 hover:text-red-700">
                                    <i class="fas fa-trash"></i>
                                </button>
                            `;
                            
                            slotsContainer.appendChild(newSlot);
                            
                            // Add event listener to the new remove button
                            newSlot.querySelector('.remove-time-slot').addEventListener('click', function() {
                                newSlot.remove();
                            });
                        });
                    });
                }
            } catch (error) {
                console.error('Error loading weekly schedule:', error);
            }
            
            // Load date exceptions
            try {
                const storedExceptions = localStorage.getItem('dateExceptions');
                if (storedExceptions) {
                    const exceptions = JSON.parse(storedExceptions);
                    updateExceptionsList(exceptions);
                }
            } catch (error) {
                console.error('Error loading date exceptions:', error);
            }
            
            // Check authentication
            checkAuth();
        });

        // Generate time options for select elements
        function generateTimeOptions(selectedValue, startTime, endTime, intervalMinutes) {
            const start = parseTimeString(startTime);
            const end = parseTimeString(endTime);
            const interval = intervalMinutes * 60 * 1000; // Convert to milliseconds
            
            let options = '';
            for (let time = start; time <= end; time += interval) {
                const timeString = formatTimeString(time);
                const selected = timeString === selectedValue ? 'selected' : '';
                options += `<option value="${timeString}" ${selected}>${formatTime(timeString)}</option>`;
            }
            
            return options;
        }

        // Parse time string (HH:MM) to milliseconds since midnight
        function parseTimeString(timeString) {
            const [hours, minutes] = timeString.split(':').map(Number);
            return (hours * 60 + minutes) * 60 * 1000;
        }

        // Format milliseconds since midnight to time string (HH:MM)
        function formatTimeString(milliseconds) {
            const totalMinutes = Math.floor(milliseconds / (60 * 1000));
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
        }

        // Check authentication
        function checkAuth() {
            let isAuthenticated = false;
            let user = null;
            
            // Check Google authentication
            if (window.googleAuthManager && window.googleAuthManager.isAuthenticated()) {
                console.log('User is authenticated with Google');
                isAuthenticated = true;
                user = window.googleAuthManager.getCurrentUser();
            } 
            // Check Sturij authentication
            else if (window.sturijAuth && window.sturijAuth.isUserAuthenticated()) {
                console.log('User is authenticated with Sturij Auth');
                isAuthenticated = true;
                user = window.sturijAuth.getCurrentUser();
            } else {
                // Try to get from localStorage directly
                try {
                    const userInfoString = localStorage.getItem('sturijUserInfo');
                    if (userInfoString) {
                        user = JSON.parse(userInfoString);
                        isAuthenticated = true;
                    }
                } catch (error) {
                    console.error('Error parsing user info:', error);
                }
            }
            
            if (!isAuthenticated) {
                console.log('User is not authenticated, redirecting to auth page');
                window.location.href = '../auth.html';
                return;
            }
            
            // Check if user is admin
            if (!user.is_admin) {
                console.log('User is not an admin, redirecting to customer page');
                window.location.href = '../index.html';
                return;
            }
            
            // Update UI with user info
            updateUIWithUserInfo(user);
        }
        
        function updateUIWithUserInfo(user) {
            // Update admin name
            const adminNameElement = document.getElementById('admin-name');
            if (adminNameElement && user.name) {
                adminNameElement.textContent = user.name;
            }
            
            // Update admin email
            const adminEmailElement = document.getElementById('admin-email');
            if (adminEmailElement && user.email) {
                adminEmailElement.textContent = user.email;
            }
            
            // Update admin avatar
            const adminAvatarElement = document.getElementById('admin-avatar');
            if (adminAvatarElement) {
                if (user.picture) {
                    adminAvatarElement.src = user.picture;
                } else {
                    // Generate avatar from name
                    const name = user.name || user.email || 'Admin';
                    adminAvatarElement.src = `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&background=3b82f6&color=fff`;
                }
            }
        }
    </script>
</body>
</html>
